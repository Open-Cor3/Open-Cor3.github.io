<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>War Tycoon Trade Calculator</title<link rel="stylesheet" href="Page/Style.css">
</head>
<body>
    <div class="topbar">
        <div class="logo">
            <i class="fa-solid fa-shield-halved"></i>
            War Tycoon Tools
        </div>
        <ul class="nav-links">
            <li><a href="index.html" class="active">Skin Values</a></li>
            <li><a href="calculator.html">Trade Calculator</a></li>
        </ul>
        <button class="menu-toggle" id="menu-toggle">
            <i class="fa-solid fa-bars"></i>
        </button>
    </div>

    <header>
        <h1>War Tycoon Skin Values</h1>
        <p class="subtitle">Browse and search your favorite game skins</p>
    </header>


    <!-- Main Content -->
    <div class="trade-calculator">
        <!-- Your Side -->
        <div class="trade-side" id="your-side">
            <div class="trade-header">
                <div class="side-title">You Give</div>
                <div class="trade-total" id="your-total">0 ðŸ¥‡</div>
            </div>
            <div class="search-container">
                <select id="your-skin-dropdown" class="search-input">
                    <option value="">Select a skin...</option>
                </select>
                <input type="number" id="your-medals" class="search-input" placeholder="Enter medals (optional)" />
                <button onclick="addSkinToYourSide()">Add Skin</button>
            </div>
            <div class="trade-items" id="your-items">
                <!-- Trade items will be added here -->
            </div>
        </div>

        <!-- Middle Section -->
        <div class="trade-middle">
            <div class="vs-text">VS</div>
            <button class="reset-button" id="reset-trade">
                Reset
            </button>
        </div>

        <!-- Their Side -->
        <div class="trade-side" id="their-side">
            <div class="trade-header">
                <div class="side-title">You Receive</div>
                <div class="trade-total" id="their-total">0 ðŸ¥‡</div>
            </div>
            <div class="search-container">
                <select id="their-skin-dropdown" class="search-input">
                    <option value="">Select a skin...</option>
                </select>
                <input type="number" id="their-medals" class="search-input" placeholder="Enter medals (optional)" />
                <button onclick="addSkinToTheirSide()">Add Skin</button>
            </div>
            <div class="trade-items" id="their-items">
                <!-- Trade items will be added here -->
            </div>
        </div>
    </div>

    <!-- Trade Result -->
    <div class="trade-result">
        <div class="result-title">Trade Analysis</div>
        <div class="trade-status" id="trade-status">Add items to analyze trade</div>
        <div class="result-details">
            <div class="result-side">
                <div class="result-value" id="your-value">0 ðŸ¥‡</div>
                <div class="result-label">Your Offer</div>
            </div>
            <div class="result-side">
                <div class="result-value" id="their-value">0 ðŸ¥‡</div>
                <div class="result-label">Their Offer</div>
            </div>
        </div>
        <div class="result-difference" id="result-difference"></div>
    </div>

    <footer>
        War Tycoon Trade Calculator Â© 2025 | All game assets belong to their respective owners
    </footer>

    <!-- Font Awesome Icons (using CDN) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/js/all.min.js"></script>

    <script>
        let skins = [];

        // Fetch skins data
        fetch("Page/Skins.json")
        .then(res => res.json())
        .then(data => {
            skins = data;
            renderSkinDropdowns(skins);  // Populate dropdown options
        })
        .catch(err => console.error("Failed to load skins:", err));

        // DOM Elements
        const yourSkinDropdown = document.getElementById('your-skin-dropdown');
        const theirSkinDropdown = document.getElementById('their-skin-dropdown');
        const yourMedalsInput = document.getElementById('your-medals');
        const theirMedalsInput = document.getElementById('their-medals');
        const yourItems = document.getElementById('your-items');
        const theirItems = document.getElementById('their-items');
        const yourTotal = document.getElementById('your-total');
        const theirTotal = document.getElementById('their-total');
        const yourValue = document.getElementById('your-value');
        const theirValue = document.getElementById('their-value');
        const tradeStatus = document.getElementById('trade-status');

        // Render skin dropdowns
        function renderSkinDropdowns(skins) {
            skins.forEach(skin => {
                let option = document.createElement("option");
                option.value = skin.id;
                option.text = skin.name;
                yourSkinDropdown.appendChild(option);
                let optionForTheirSide = option.cloneNode(true);
                theirSkinDropdown.appendChild(optionForTheirSide);
            });
        }

        // Add skin to your side
        function addSkinToYourSide() {
            const selectedSkinId = yourSkinDropdown.value;
            const medals = parseInt(yourMedalsInput.value) || 0;
            if (!selectedSkinId) return;

            const skin = skins.find(s => s.id == selectedSkinId);
            const skinValue = skin.avgPrice + medals;

            let itemDiv = document.createElement("div");
            itemDiv.classList.add("trade-item");
            itemDiv.innerText = `${skin.name} + ${medals} ðŸ¥‡`;
            yourItems.appendChild(itemDiv);

            updateTotal("your", skinValue);
        }

        // Add skin to their side
        function addSkinToTheirSide() {
            const selectedSkinId = theirSkinDropdown.value;
            const medals = parseInt(theirMedalsInput.value) || 0;
            if (!selectedSkinId) return;

            const skin = skins.find(s => s.id == selectedSkinId);
            const skinValue = skin.avgPrice + medals;

            let itemDiv = document.createElement("div");
            itemDiv.classList.add("trade-item");
            itemDiv.innerText = `${skin.name} + ${medals} ðŸ¥‡`;
            theirItems.appendChild(itemDiv);

            updateTotal("their", skinValue);
        }

        // Update the total value
        function updateTotal(side, value) {
            const totalElement = side === "your" ? yourTotal : theirTotal;
            const valueElement = side === "your" ? yourValue : theirValue;

            const currentTotal = parseInt(totalElement.innerText) || 0;
            const newTotal = currentTotal + value;
            totalElement.innerText = newTotal + " ðŸ¥‡";
            valueElement.innerText = newTotal + " ðŸ¥‡";

            updateTradeAnalysis();
        }

        // Update trade analysis
        function updateTradeAnalysis() {
            const yourOffer = parseInt(yourTotal.innerText) || 0;
            const theirOffer = parseInt(theirTotal.innerText) || 0;

            const difference = yourOffer - theirOffer;
            const resultElement = document.getElementById('result-difference');

            if (difference === 0) {
                tradeStatus.innerText = "Trade is Fair";
                resultElement.innerText = "No difference";
            } else if (difference > 0) {
                tradeStatus.innerText = "Your Offer is Better";
                resultElement.innerText = `${difference} ðŸ¥‡`;
            } else {
                tradeStatus.innerText = "Their Offer is Better";
                resultElement.innerText = `${-difference} ðŸ¥‡`;
            }
        }

        // Reset Trade
        document.getElementById('reset-trade').addEventListener('click', () => {
            yourItems.innerHTML = "";
            theirItems.innerHTML = "";
            yourTotal.innerText = "0 ðŸ¥‡";
            theirTotal.innerText = "0 ðŸ¥‡";
            yourValue.innerText = "0 ðŸ¥‡";
            theirValue.innerText = "0 ðŸ¥‡";
            tradeStatus.innerText = "Add items to analyze trade";
            resultElement.innerText = "";
        });
    </script>
</body>
</html>
